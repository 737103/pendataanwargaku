"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{30356:(e,a,r)=>{r.d(a,{C:()=>o,z:()=>d});var l=r(95155),s=r(12115),t=r(57701),n=r(70154),i=r(59434);let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.bL,{className:(0,i.cn)("grid gap-2",r),...s,ref:a})});d.displayName=t.bL.displayName;let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.q7,{ref:a,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:(0,l.jsx)(t.C1,{className:"flex items-center justify-center",children:(0,l.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=t.q7.displayName},47727:(e,a,r)=>{r.d(a,{F:()=>h});var l=r(95155),s=r(85057),t=r(62523),n=r(88539),i=r(66766),d=r(12115),o=r(47655),c=r(59434);let m=d.forwardRef((e,a)=>{let{className:r,children:s,...t}=e;return(0,l.jsxs)(o.bL,{ref:a,className:(0,c.cn)("relative overflow-hidden",r),...t,children:[(0,l.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,l.jsx)(u,{}),(0,l.jsx)(o.OK,{})]})});m.displayName=o.bL.displayName;let u=d.forwardRef((e,a)=>{let{className:r,orientation:s="vertical",...t}=e;return(0,l.jsx)(o.VM,{ref:a,orientation:s,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:(0,l.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});function h(e){let{citizen:a}=e,r=a.documents&&a.documents.length>0&&a.documents[0].startsWith("data:image")?a.documents[0]:null;return(0,l.jsx)(m,{className:"h-[70vh] w-full",children:(0,l.jsxs)("div",{className:"space-y-4 py-4 pr-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"name",children:"Nama Lengkap"}),(0,l.jsx)(t.p,{id:"name",value:a.name,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"nik",children:"NIK"}),(0,l.jsx)(t.p,{id:"nik",value:a.nik,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"kkNumber",children:"No. KK"}),(0,l.jsx)(t.p,{id:"kkNumber",value:a.kkNumber,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"gender",children:"Jenis Kelamin"}),(0,l.jsx)(t.p,{id:"gender",value:a.gender,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"bloodType",children:"Golongan Darah"}),(0,l.jsx)(t.p,{id:"bloodType",value:a.bloodType,readOnly:!0})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"address",children:"Alamat"}),(0,l.jsx)(n.T,{id:"address",value:a.address,readOnly:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"rt",children:"RT"}),(0,l.jsx)(t.p,{id:"rt",value:a.rt,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"rw",children:"RW"}),(0,l.jsx)(t.p,{id:"rw",value:a.rw,readOnly:!0})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"contact",children:"No. Telepon"}),(0,l.jsx)(t.p,{id:"contact",value:a.contactInfo,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"occupation",children:"Pekerjaan"}),(0,l.jsx)(t.p,{id:"occupation",value:a.occupation,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"lastEducation",children:"Pendidikan Terakhir"}),(0,l.jsx)(t.p,{id:"lastEducation",value:a.lastEducation,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"religion",children:"Agama"}),(0,l.jsx)(t.p,{id:"religion",value:a.religion,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"maritalStatus",children:"Status Perkawinan"}),(0,l.jsx)(t.p,{id:"maritalStatus",value:a.maritalStatus,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"familyRelationship",children:"Hubungan Keluarga"}),(0,l.jsx)(t.p,{id:"familyRelationship",value:a.familyRelationship,readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"familyMembersCount",children:"Jml. Anggota Keluarga"}),(0,l.jsx)(t.p,{id:"familyMembersCount",value:a.familyMembersCount,readOnly:!0})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"documents",children:"Dokumen"}),r?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-md border",children:(0,l.jsx)(i.default,{src:r,alt:"Pratinjau Dokumen ".concat(a.name),"data-ai-hint":"document scan",fill:!0,className:"object-cover"})}),(0,l.jsx)(t.p,{id:"documents",value:"Gambar telah diunggah.",readOnly:!0})]}):(0,l.jsx)(t.p,{id:"documents",value:"Tidak ada dokumen",readOnly:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(s.J,{htmlFor:"username",children:"Dientri oleh"}),(0,l.jsx)(t.p,{id:"username",value:a.username,readOnly:!0})]})]})})}u.displayName=o.VM.displayName},54165:(e,a,r)=>{r.d(a,{Cf:()=>u,L3:()=>x,c7:()=>h,lG:()=>d,rr:()=>p,zM:()=>o});var l=r(95155),s=r(12115),t=r(45821),n=r(25318),i=r(59434);let d=t.bL,o=t.l9,c=t.ZL;t.bm;let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});m.displayName=t.hJ.displayName;let u=s.forwardRef((e,a)=>{let{className:r,children:s,...d}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)(m,{}),(0,l.jsxs)(t.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...d,children:[s,(0,l.jsxs)(t.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(n.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=t.UC.displayName;let h=e=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...r})};h.displayName="DialogHeader";let x=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=t.hE.displayName;let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});p.displayName=t.VY.displayName},59409:(e,a,r)=>{r.d(a,{bq:()=>u,eb:()=>j,gC:()=>p,l6:()=>c,yv:()=>m});var l=r(95155),s=r(12115),t=r(1028),n=r(79556),i=r(77381),d=r(10518),o=r(59434);let c=t.bL;t.YJ;let m=t.WT,u=s.forwardRef((e,a)=>{let{className:r,children:s,...i}=e;return(0,l.jsxs)(t.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,l.jsx)(t.In,{asChild:!0,children:(0,l.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=t.l9.displayName;let h=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=t.PP.displayName;let x=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=t.wn.displayName;let p=s.forwardRef((e,a)=>{let{className:r,children:s,position:n="popper",...i}=e;return(0,l.jsx)(t.ZL,{children:(0,l.jsxs)(t.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...i,children:[(0,l.jsx)(h,{}),(0,l.jsx)(t.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(x,{})]})})});p.displayName=t.UC.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=t.JU.displayName;let j=s.forwardRef((e,a)=>{let{className:r,children:s,...n}=e;return(0,l.jsxs)(t.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(t.VF,{children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})}),(0,l.jsx)(t.p4,{children:s})]})});j.displayName=t.q7.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=t.wv.displayName},66695:(e,a,r)=>{r.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i});var l=r(95155),s=r(12115),t=r(59434);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},68856:(e,a,r)=>{r.d(a,{E:()=>t});var l=r(95155),s=r(59434);function t(e){let{className:a,...r}=e;return(0,l.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",a),...r})}},85127:(e,a,r)=>{r.d(a,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>c});var l=r(95155),s=r(12115),t=r(59434);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,t.cn)("w-full caption-bottom text-sm",r),...s})})});n.displayName="Table";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("thead",{ref:a,className:(0,t.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,t.cn)("[&_tr:last-child]:border-0",r),...s})});d.displayName="TableBody",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tr",{ref:a,className:(0,t.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});o.displayName="TableRow";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("th",{ref:a,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("td",{ref:a,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});m.displayName="TableCell",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("caption",{ref:a,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},88539:(e,a,r)=>{r.d(a,{T:()=>n});var l=r(95155),s=r(12115),t=r(59434);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...s})});n.displayName="Textarea"},90010:(e,a,r)=>{r.d(a,{$v:()=>p,EO:()=>m,Lt:()=>d,Rx:()=>j,Zr:()=>f,ck:()=>h,r7:()=>x,wd:()=>u});var l=r(95155),s=r(12115),t=r(62278),n=r(59434),i=r(30285);let d=t.bL;t.l9;let o=t.ZL,c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:a})});c.displayName=t.hJ.displayName;let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{}),(0,l.jsx)(t.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});m.displayName=t.UC.displayName;let u=e=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};u.displayName="AlertDialogHeader";let h=e=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};h.displayName="AlertDialogFooter";let x=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",r),...s})});x.displayName=t.hE.displayName;let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});p.displayName=t.VY.displayName;let j=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.rc,{ref:a,className:(0,n.cn)((0,i.r)(),r),...s})});j.displayName=t.rc.displayName;let f=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)(t.ZD,{ref:a,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});f.displayName=t.ZD.displayName},97419:(e,a,r)=>{r.d(a,{P:()=>w});var l=r(95155),s=r(90221),t=r(62177),n=r(55594),i=r(12115),d=r(30285),o=r(17759),c=r(59409),m=r(30356),u=r(62523),h=r(87481),x=r(16923),p=r(50172),j=r(85174),f=r(88539),g=r(35695);let y=["image/jpeg","image/jpg","image/png"],N=/^00\d{1,2}$/,b=["Belum/Tidak Bekerja","Mengurus Rumah Tangga","Karyawan Swasta","Pegawai Negeri Sipil","ASN P3K","Honorer","Buruh Harian Lepas","Wiraswasta","Pedagang","Petani","Lainnya"],v=(e,a)=>n.z.object({name:n.z.string().min(1,"Nama tidak boleh kosong."),nik:n.z.string().length(16,"NIK harus 16 digit.").regex(/^\d+$/,"NIK harus berupa angka."),kkNumber:n.z.string().length(16,"No. KK harus 16 digit.").regex(/^\d+$/,"No. KK harus berupa angka."),address:n.z.string().min(1,"Alamat tidak boleh kosong."),rt:n.z.string().min(3,"RT minimal 3 digit").max(4,"RT maksimal 4 digit").regex(N,"Format RT tidak valid (cth: 001)"),rw:n.z.string().min(3,"RW minimal 3 digit").max(4,"RW maksimal 4 digit").regex(N,"Format RW tidak valid (cth: 001)"),contactInfo:n.z.string().min(10,"Nomor HP minimal 10 digit").max(15,"Nomor HP maksimal 15 digit."),gender:n.z.enum(["Laki-laki","Perempuan"]),bloodType:n.z.string({required_error:"Golongan darah harus dipilih."}).refine(e=>""!==e,"Golongan darah harus dipilih."),occupation:n.z.string({required_error:"Pekerjaan harus dipilih."}),otherOccupation:n.z.string().optional(),lastEducation:n.z.string(),religion:n.z.string(),maritalStatus:n.z.string(),familyRelationship:n.z.string(),familyMembersCount:n.z.coerce.number().min(1,"Jumlah anggota keluarga minimal 1."),documents:n.z.any().optional().refine(e=>{var a;return!e||0===e.length||(null==e||null==(a=e[0])?void 0:a.size)<=512e3},"Ukuran file maksimal adalah 500 KB.").refine(e=>{var a;return!e||0===e.length||y.includes(null==e||null==(a=e[0])?void 0:a.type)},"Hanya format .jpg, .jpeg, dan .png yang diterima.")}).refine(e=>"Lainnya"!==e.occupation||!!e.otherOccupation&&e.otherOccupation.trim().length>0,{message:"Pekerjaan lainnya harus diisi",path:["otherOccupation"]}).refine(e=>{if("Kepala Keluarga"===e.familyRelationship){let a=Array.isArray(e.documents)&&e.documents.length>0&&"string"==typeof e.documents[0],r=e.documents instanceof FileList&&e.documents.length>0;return!!a||r}return!0},{message:"Dokumen wajib diunggah untuk Kepala Keluarga.",path:["documents"]}).superRefine(async(r,l)=>{if(r.nik!==e&&16===r.nik.length&&/^\d+$/.test(r.nik))try{await (0,j.Fo)(r.nik,a)&&l.addIssue({code:n.z.ZodIssueCode.custom,message:"NIK ini sudah terdaftar untuk warga lain.",path:["nik"]})}catch(e){console.error("NIK validation failed during edit:",e)}}),k=e=>new Promise((a,r)=>{let l=new FileReader;l.onload=()=>a(l.result),l.onerror=r,l.readAsDataURL(e)});function w(e){let{citizen:a,onSuccess:r}=e,{toast:n}=(0,h.dj)(),[y,N]=(0,i.useState)(!1),w=(0,g.useRouter)(),R=v(a.nik,a.id),C=!b.includes(a.occupation),I=(0,t.mN)({resolver:(0,s.u)(R),defaultValues:{...a,name:a.name,nik:a.nik,kkNumber:a.kkNumber,address:a.address,rt:a.rt,rw:a.rw,contactInfo:a.contactInfo,gender:a.gender,bloodType:a.bloodType,occupation:C?"Lainnya":a.occupation,otherOccupation:C?a.occupation:"",lastEducation:a.lastEducation,religion:a.religion,maritalStatus:a.maritalStatus,familyRelationship:a.familyRelationship,familyMembersCount:a.familyMembersCount,documents:a.documents||[]}}),z=I.watch("occupation"),J=I.watch("familyRelationship");async function K(e){N(!0);try{let l="Lainnya"===e.occupation?e.otherOccupation:e.occupation,{otherOccupation:s,...t}=e,i={...t,occupation:l};if(e.documents&&e.documents instanceof FileList&&e.documents.length>0)try{i.documents=[await k(e.documents[0])]}catch(e){console.error("Error converting file to data URI:",e),n({title:"File Error",description:"Gagal memproses file baru yang diunggah.",variant:"destructive"}),N(!1);return}else i.documents=a.documents;await (0,j.AR)(a.id,i),n({title:"Data Diperbarui",description:'Data untuk "'.concat(e.name,'" telah berhasil diperbarui.')}),r(),w.refresh()}catch(e){console.error("Failed to update citizen data:",e),n({title:"Gagal Memperbarui Data",description:"Terjadi kesalahan saat menyimpan perubahan.",variant:"destructive"})}finally{N(!1)}}return(0,l.jsx)(o.lV,{...I,children:(0,l.jsxs)("form",{onSubmit:I.handleSubmit(K),className:"space-y-4 py-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"name",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Nama Lengkap"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"cth. Budi Santoso",...a})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"nik",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"NIK"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"16 digit NIK",...a})}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"kkNumber",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"No. KK"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"16 digit No. KK",...a})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"contactInfo",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Nomor Telepon"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"cth. 081234567890",...a})}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsx)(o.zB,{control:I.control,name:"address",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Alamat Lengkap"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(f.T,{placeholder:"cth. Jl. Pahlawan No. 10, Semarang",...a})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"rt",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"RT"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"cth. 001",...a})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"rw",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"RW"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"cth. 002",...a})}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"gender",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{className:"space-y-3",children:[(0,l.jsx)(o.lR,{children:"Jenis Kelamin"}),(0,l.jsx)(o.MJ,{children:(0,l.jsxs)(m.z,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col space-y-1",children:[(0,l.jsxs)(o.eI,{className:"flex items-center space-x-3 space-y-0",children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(m.C,{value:"Laki-laki"})}),(0,l.jsx)(o.lR,{className:"font-normal",children:"Laki-laki"})]}),(0,l.jsxs)(o.eI,{className:"flex items-center space-x-3 space-y-0",children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(m.C,{value:"Perempuan"})}),(0,l.jsx)(o.lR,{className:"font-normal",children:"Perempuan"})]})]})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"bloodType",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Golongan Darah"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih golongan darah"})})}),(0,l.jsxs)(c.gC,{children:[(0,l.jsx)(c.eb,{value:"A",children:"A"}),(0,l.jsx)(c.eb,{value:"B",children:"B"}),(0,l.jsx)(c.eb,{value:"AB",children:"AB"}),(0,l.jsx)(c.eb,{value:"O",children:"O"}),(0,l.jsx)(c.eb,{value:"Tidak tahu",children:"Tidak tahu"})]})]}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"occupation",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Pekerjaan"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih pekerjaan"})})}),(0,l.jsx)(c.gC,{children:b.map(e=>(0,l.jsx)(c.eb,{value:e,children:e},e))})]}),(0,l.jsx)(o.C5,{})]})}}),"Lainnya"===z&&(0,l.jsx)(o.zB,{control:I.control,name:"otherOccupation",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Pekerjaan Lainnya"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{placeholder:"Sebutkan pekerjaan",...a})}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"lastEducation",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Pendidikan Terakhir"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih pendidikan"})})}),(0,l.jsxs)(c.gC,{children:[(0,l.jsx)(c.eb,{value:"Tidak-belum sekolah",children:"Tidak-belum sekolah"}),(0,l.jsx)(c.eb,{value:"Tamat SD-sederajat",children:"Tamat SD-sederajat"}),(0,l.jsx)(c.eb,{value:"Tamat SLTP-sederajat",children:"Tamat SLTP-sederajat"}),(0,l.jsx)(c.eb,{value:"Tamat SLTA-sederajat",children:"Tamat SLTA-sederajat"}),(0,l.jsx)(c.eb,{value:"Diploma III",children:"Diploma III"}),(0,l.jsx)(c.eb,{value:"Diploma III-sarjana Muda",children:"Diploma III-sarjana Muda"}),(0,l.jsx)(c.eb,{value:"Strata I-Sarjana",children:"Strata I-Sarjana"}),(0,l.jsx)(c.eb,{value:"Strata II-Magister",children:"Strata II-Magister"}),(0,l.jsx)(c.eb,{value:"Strata III-Doktor",children:"Strata III-Doktor"})]})]}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"religion",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Agama"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih agama"})})}),(0,l.jsxs)(c.gC,{children:[(0,l.jsx)(c.eb,{value:"Islam",children:"Islam"}),(0,l.jsx)(c.eb,{value:"Kristen",children:"Kristen"}),(0,l.jsx)(c.eb,{value:"Katolik",children:"Katolik"}),(0,l.jsx)(c.eb,{value:"Hindu",children:"Hindu"}),(0,l.jsx)(c.eb,{value:"Buddha",children:"Buddha"}),(0,l.jsx)(c.eb,{value:"Khonghucu",children:"Khonghucu"})]})]}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"maritalStatus",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Status Perkawinan"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih status"})})}),(0,l.jsxs)(c.gC,{children:[(0,l.jsx)(c.eb,{value:"Belum Kawin",children:"Belum Kawin"}),(0,l.jsx)(c.eb,{value:"Kawin",children:"Kawin"}),(0,l.jsx)(c.eb,{value:"Cerai Hidup",children:"Cerai Hidup"}),(0,l.jsx)(c.eb,{value:"Cerai Mati",children:"Cerai Mati"})]})]}),(0,l.jsx)(o.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(o.zB,{control:I.control,name:"familyRelationship",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Hubungan dalam Keluarga"}),(0,l.jsxs)(c.l6,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,l.jsx)(o.MJ,{children:(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Pilih hubungan"})})}),(0,l.jsxs)(c.gC,{children:[(0,l.jsx)(c.eb,{value:"Kepala Keluarga",children:"Kepala Keluarga"}),(0,l.jsx)(c.eb,{value:"Istri",children:"Istri"}),(0,l.jsx)(c.eb,{value:"Anak",children:"Anak"}),(0,l.jsx)(c.eb,{value:"Family Lainnya",children:"Family Lainnya"})]})]}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsx)(o.zB,{control:I.control,name:"familyMembersCount",render:e=>{let{field:a}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Jumlah Anggota Keluarga"}),(0,l.jsx)(o.MJ,{children:(0,l.jsx)(u.p,{type:"number",placeholder:"cth. 4",...a})}),(0,l.jsx)(o.C5,{})]})}})]}),"Kepala Keluarga"===J&&(0,l.jsx)(o.zB,{control:I.control,name:"documents",render:e=>{let{field:{onChange:a,value:r,...s}}=e;return(0,l.jsxs)(o.eI,{children:[(0,l.jsx)(o.lR,{children:"Upload Dokumen Baru (Opsional)"}),(0,l.jsx)(o.MJ,{children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,l.jsx)(u.p,{type:"file",className:"pl-10",onChange:e=>a(e.target.files),accept:"image/png, image/jpeg, image/jpg",...s})]})}),(0,l.jsx)(o.Rr,{children:"Kosongkan jika tidak ingin mengubah dokumen (maks. 500 KB)."}),(0,l.jsx)(o.C5,{})]})}}),(0,l.jsxs)(d.$,{type:"submit",className:"w-full",disabled:y,children:[y&&(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan Perubahan"]})]})})}}}]);